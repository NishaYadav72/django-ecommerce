{% extends 'core/base.html' %}

{% block content %}
<div class="container mt-5" style="padding-left:250px; padding-right:250px;">
    <h2 class="mb-4 text-center" style="font-weight:600; font-size:2rem; color:#333;">My Cart</h2>

    {% if cart_items %}
        <div class="cart-list" style="display:flex; flex-direction:column; gap:12px;">
            {% for item in cart_items %}
            <div class="cart-row" style="display:flex; align-items:center; justify-content:space-between;
                                         border:1px solid #ddd; border-radius:8px; padding:12px 15px;
                                         box-shadow:0 2px 6px rgba(0,0,0,0.1); transition:all 0.3s;">
                
                <!-- Left: Image -->
<div class="cart-image" style="flex:0 0 100px; height:100px; overflow:hidden; border-radius:6px; margin-right:15px;">
    <a href="{% url 'details_product' item.product.id %}">
        <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}" 
             style="width:100%; height:100%; object-fit:cover;">
    </a>
</div>

<!-- Middle: Product Info -->
<div class="cart-info" style="flex:1; display:flex; flex-direction:column; justify-content:center; gap:5px;">
    <p style="font-weight:700; font-size:1rem; color:#333; margin:0;">
        <a href="{% url 'details_product' item.product.id %}" style="text-decoration:none; color:inherit;">
            {{ item.product.name }}
        </a>
    </p>
    
    <!-- Price and Discount % together with spacing -->
    <p style="color:#555; font-size:0.9rem; margin:0;">
        Price: ₹{{ item.product.price }}
        {% if item.product.discount %}
            <span style="color:#28a745; font-weight:600; margin-left:15px; padding-left:10px; border-left:1px solid #28a745;">
                Discount: {{ item.product.discount }}%
            </span>
        {% endif %}
    </p>

    <!-- Total and Quantity in one line -->
    <p style="color:#333; font-size:0.9rem; margin:0;">
        Total: ₹{{ item.total_price|floatformat:2 }} 
        <span style="color:#28a745; font-weight:600; margin-left:10px;">| Quantity: {{ item.quantity }}</span>
    </p>
</div>


                <!-- Right: Remove Button -->
                <div class="cart-remove">
                    <a href="{% url 'remove_from_cart' item.id %}" class="btn btn-sm btn-danger" style="min-width:40px; height:40px; display:flex; align-items:center; justify-content:center;">
                        <i class="bi bi-trash"></i>
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <p style="text-align:center; color:#555; font-size:1.2rem;">Your cart is empty.</p>
    {% endif %}
</div>

<style>
.cart-row:hover {
    box-shadow:0 4px 10px rgba(0,0,0,0.15);
    transform: translateY(-1px);
    transition: all 0.3s;
}

/* Medium Screens */
@media (max-width: 992px) {
    .container {
        padding-left: 40px !important;
        padding-right: 40px !important;
    }
}

/* Small Screens */
@media (max-width: 768px) {
    .cart-row {
        flex-direction: column;
        align-items: flex-start;
        padding: 10px;
    }
    .cart-image {
        width: 100%;
        height: 200px;
        margin-right: 0;
        margin-bottom: 10px;
    }
    .cart-info {
        width: 100%;
    }
    .cart-remove {
        width: 100%;
        display: flex;
        justify-content: flex-end;
        margin-top: 10px;
    }
}

/* Extra Small Screens */
@media (max-width: 480px) {
    .cart-row {
        padding: 8px;
    }
    .cart-image {
        height: 180px;
    }
    .cart-info p {
        font-size: 0.85rem;
    }
}
</style>
{% endblock %}
