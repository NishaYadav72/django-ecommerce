{% extends 'core/base.html' %}
{% block content %}
<div class="container mt-5">
    <h2>Return Product - Order #{{ order.id }}</h2>
    <p>Please select your reason for returning this product:</p>

    <form method="POST" action="{% url 'return_request' order.id %}">
        {% csrf_token %}
        <div class="mb-3">
            {% for reason in reasons %}
                <div class="form-check">
                    <input type="radio" class="form-check-input reason-radio" name="reason" value="{{ reason }}" id="r{{ forloop.counter }}">
                    <label class="form-check-label" for="r{{ forloop.counter }}">{{ reason }}</label>
                </div>
            {% endfor %}
        </div>
 
        <div class="mb-3">
            <label for="comment" class="form-label">Additional Comment:</label>
            <textarea class="form-control" name="comment" id="comment" rows="3"></textarea>
        </div>

        <button type="submit" id="continueBtn" class="btn btn-primary" disabled>Continue</button>
    </form>
</div>

<script>
const radios = document.querySelectorAll('.reason-radio');
const commentBox = document.getElementById('comment');
const continueBtn = document.getElementById('continueBtn');

function checkForm() {
    let selected = false;
    radios.forEach(r => { if (r.checked) selected = true; });
    if (selected && commentBox.value.trim() !== "") {
        continueBtn.disabled = false;
    } else {
        continueBtn.disabled = true;
    }
}

radios.forEach(r => r.addEventListener('change', checkForm));
commentBox.addEventListener('input', checkForm);
</script>
{% endblock %}
