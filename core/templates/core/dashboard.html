{% extends 'core/base.html' %}

{% block title %}Dashboard{% endblock %}

{% block content %}

<div class="dashboard-container" style="max-width:1200px; margin:50px auto; display:flex; flex-wrap:wrap; gap:40px; font-family:'Segoe UI',sans-serif; background:#f4f6f8; padding:20px; border-radius:15px;">

    <!-- Left: Profile Card -->
    <div class="profile-section" style="flex:1; min-width:300px; margin-top:30px;">
        <div style="padding:30px; border-radius:20px; background:#1e1e2f; color:#fff; box-shadow:0 10px 25px rgba(0,0,0,0.15);">
            <h3 style="margin-bottom:25px; font-size:1.6rem;">My Profile</h3>

            <form method="POST" id="profileForm">
                {% csrf_token %}
                <div style="margin-bottom:20px;">
                    <label style="display:block; font-weight:600; margin-bottom:6px;">Username</label>
                    <input type="text" name="username" value="{{ request.user.username }}" readonly
                           style="width:100%; padding:14px; border-radius:8px; border:none; background:#2c2c3f; color:#fff; font-size:0.95rem;">
                </div>
                <div style="margin-bottom:20px;">
                    <label style="display:block; font-weight:600; margin-bottom:6px;">Email</label>
                    <input type="email" name="email" value="{{ request.user.email }}" readonly
                           style="width:100%; padding:14px; border-radius:8px; border:none; background:#2c2c3f; color:#fff; font-size:0.95rem;">
                </div>
                <div style="margin-bottom:20px;">
                    <label style="display:block; font-weight:600; margin-bottom:6px;">Mobile</label>
                    <input type="text" name="mobile" value="{{ request.user.phone }}" readonly
                           style="width:100%; padding:14px; border-radius:8px; border:none; background:#2c2c3f; color:#fff; font-size:0.95rem;">
                </div>
                <div style="margin-bottom:20px;">
                    <label style="display:block; font-weight:600; margin-bottom:6px;">Gender</label>
                    <select name="gender" id="gender" disabled
                            style="width:100%; padding:14px; border-radius:8px; border:none; background:#2c2c3f; color:#fff; font-size:0.95rem;">
                        <option value="">Select Gender</option>
                        <option value="M" {% if request.user.gender == "M" %}selected{% endif %}>Male</option>
                        <option value="F" {% if request.user.gender == "F" %}selected{% endif %}>Female</option>
                        <option value="O" {% if request.user.gender == "O" %}selected{% endif %}>Other</option>
                    </select>
                </div>
            </form>

            <div style="margin-top:25px; display:flex; gap:12px;">
                <button type="button" id="editProfileBtn"
                        style="flex:1; padding:14px; background:#ff5722; color:white; border:none; border-radius:8px; font-weight:600; cursor:pointer;">Edit</button>
                <button type="submit" form="profileForm" id="saveProfileBtn"
                        style="flex:1; padding:14px; background:#00bcd4; color:white; border:none; border-radius:8px; font-weight:600; cursor:pointer; display:none;">Save</button>
            </div>
        </div>
    </div>


    
    <!-- Right: Dashboard Cards + Logout -->
    <!-- Right: Dashboard Cards + Logout -->
<div class="cards-section" style="flex:2; min-width:320px;">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:30px;">
        <h2 style="font-size:1.9rem; color:#1e1e2f;">Welcome, {{ request.user.username }}!</h2>
        <form method="POST" action="{% url 'logout' %}">
            {% csrf_token %}
            <button type="submit" style="padding:12px 24px; background:#e91e63; color:white; border:none; border-radius:8px; font-weight:600; cursor:pointer;">
                Logout
            </button>
        </form>
    </div>

    <!-- Dashboard Cards -->
    <div style="display:grid; grid-template-columns:repeat(auto-fit,minmax(150px,1fr)); gap:20px; margin-bottom:30px;">
        <div class="card" style="padding:20px; border-radius:15px; text-align:center; background:#29294d; color:white; transition:0.3s;">
            <a href="{% url 'orders' %}" style="text-decoration:none; color:white;">
                <i class="fas fa-box fa-2x" style="margin-bottom:10px; color:#ff9800;"></i>
                <p style="font-weight:600;">Orders</p>
            </a>
        </div>
        <div class="card" style="padding:20px; border-radius:15px; text-align:center; background:#29294d; color:white; transition:0.3s;">
            <a href="{% url 'wishlist' %}" style="text-decoration:none; color:white;">
                <i class="fas fa-heart fa-2x" style="margin-bottom:10px; color:#e91e63;"></i>
                <p style="font-weight:600;">Wishlist</p>
            </a>
        </div>
        <div class="card" style="padding:20px; border-radius:15px; text-align:center; background:#29294d; color:white; transition:0.3s;">
            <a href="{% url 'cart' %}" style="text-decoration:none; color:white;">
                <i class="fas fa-shopping-cart fa-2x" style="margin-bottom:10px; color:#4caf50;"></i>
                <p style="font-weight:600;">Cart</p>
            </a>
        </div>
        <div class="card" style="padding:20px; border-radius:15px; text-align:center; background:#29294d; color:white; transition:0.3s;">
            <a href="{% url 'help_center' %}" style="text-decoration:none; color:white;">
                <i class="fas fa-question-circle fa-2x" style="margin-bottom:10px; color:#2196f3;"></i>
                <p style="font-weight:600;">Help Center</p>
            </a>
        </div>
    </div>


<!-- FAQ Section -->
<div class="faq-section" style="margin-top:20px; background:#fff; padding:20px; border-radius:15px; box-shadow:0 8px 20px rgba(0,0,0,0.08);">
    <h3 style="margin-bottom:15px; color:#1e1e2f;">FAQs</h3>

    <div class="faq-item" style="margin-bottom:15px; border-bottom:1px solid #eee; padding:10px 0;">
        <p class="faq-question" style="font-weight:600; margin:0; position:relative; padding-right:50px; cursor:pointer;">
            Q: How do I sign up?
            <span class="faq-icon" style="position:absolute; right:0; top:50%; transform:translateY(-50%); font-weight:700; color:#999; font-size:28px;">+</span>
        </p>
        <p class="faq-answer" style="margin:5px 0 0 0; color:#555; display:none;">A: Click on the 'Signup' link in the header, fill in your username, email, and password, then submit the form to create an account.</p>
    </div>

    <div class="faq-item" style="margin-bottom:15px; border-bottom:1px solid #eee; padding:10px 0;">
        <p class="faq-question" style="font-weight:600; margin:0; position:relative; padding-right:50px; cursor:pointer;">
            Q: How do I view products?
            <span class="faq-icon" style="position:absolute; right:0; top:50%; transform:translateY(-50%); font-weight:700; color:#999; font-size:28px;">+</span>
        </p>
        <p class="faq-answer" style="margin:5px 0 0 0; color:#555; display:none;">A: Navigate to the 'Home' page via the header or click on any product section from the homepage to see available products.</p>
    </div>

    <div class="faq-item" style="margin-bottom:15px; border-bottom:1px solid #eee; padding:10px 0;">
        <p class="faq-question" style="font-weight:600; margin:0; position:relative; padding-right:50px; cursor:pointer;">
            Q: How do I add items to my cart?
            <span class="faq-icon" style="position:absolute; right:0; top:50%; transform:translateY(-50%); font-weight:700; color:#999; font-size:28px;">+</span>
        </p>
        <p class="faq-answer" style="margin:5px 0 0 0; color:#555; display:none;">A: On the product page, click the 'Add to Cart' button. Your cart icon in the header will update automatically.</p>
    </div>

    <div class="faq-item" style="margin-bottom:15px; border-bottom:1px solid #eee; padding:10px 0;">
        <p class="faq-question" style="font-weight:600; margin:0; position:relative; padding-right:50px; cursor:pointer;">
            Q: How do I check out?
            <span class="faq-icon" style="position:absolute; right:0; top:50%; transform:translateY(-50%); font-weight:700; color:#999; font-size:28px;">+</span>
        </p>
        <p class="faq-answer" style="margin:5px 0 0 0; color:#555; display:none;">A: Go to your cart by clicking the cart icon, review your products, and click 'Checkout' to complete the purchase.</p>
    </div>
</div>


<script>
// JS: hover jaisa effect without click
document.querySelectorAll('.faq-item').forEach(item => {
    item.addEventListener('mouseenter', () => {
        item.querySelector('.faq-answer').style.display = 'block';
        item.querySelector('.faq-icon').style.transform = 'translateY(-50%) rotate(45deg)';
        item.querySelector('.faq-icon').style.color = '#e91e63';
    });
    item.addEventListener('mouseleave', () => {
        item.querySelector('.faq-answer').style.display = 'none';
        item.querySelector('.faq-icon').style.transform = 'translateY(-50%) rotate(0deg)';
        item.querySelector('.faq-icon').style.color = '#999';
    });
});
</script>

<style>
.faq-item:hover {
    background:#f9f9f9;
    transition:0.3s;
}
.faq-answer {
    line-height:1.5;
}
</style>






        {% if messages %}
        <div style="margin-top:25px;">
            {% for message in messages %}
                <div style="background:#ffeb3b; color:#1e1e2f; padding:14px; border-radius:12px; margin-bottom:12px; font-weight:600;">
                    {{ message }}
                </div>
            {% endfor %}
        </div>
        {% endif %}
    </div>

</div>

<script>
const editBtn = document.getElementById('editProfileBtn');
const saveBtn = document.getElementById('saveProfileBtn');
const profileForm = document.getElementById('profileForm');

editBtn.addEventListener('click', () => {
    profileForm.querySelectorAll('input, select').forEach(el => el.removeAttribute('readonly'));
    profileForm.querySelectorAll('select').forEach(el => el.removeAttribute('disabled'));
    editBtn.style.display = 'none';
    saveBtn.style.display = 'inline-block';
});
</script>

<style>
.card:hover {
    transform: translateY(-6px) scale(1.05);
    box-shadow:0 12px 25px rgba(0,0,0,0.2);
    background:#3b3b5c;
}

button:hover {
    opacity:0.9;
}

@media (max-width:992px) {
    .dashboard-container {
        flex-direction:column;
    }
}
</style>

{% endblock %}
