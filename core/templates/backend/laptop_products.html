{% extends 'backend/admin_base.html' %}

{% block title %}Manage Laptop Products{% endblock %}

{% block content %}
<h2>Laptop Products</h2>

<div class="table-responsive">
<table class="table table-bordered table-striped mt-3">
    <thead class="table-dark">
        <tr>
            <th>ID</th>
            <th>Product Name</th>
            <th>Brand</th>
            <th>Processor</th>
            <th>RAM Capacity</th>
            <th>RAM Type</th>
            <th>Screen Size</th>
            <th>Processor Generation</th>
            <th>SSD Capacity</th>
            <th>Operating System</th>
            <th>Weight</th>
            <th>Touch Screen</th>
            <th>Image</th>
            <th>Price (₹)</th>
            <th>Discount (%)</th>
            <th>Category</th>
            <th>Color</th> <!-- New Color Column -->
                        <th>Quantity</th> <!-- ✅ Added Quantity Column -->

            <th>Date Added</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for product in products %}
        <tr>
            <td>{{ product.id }}</td>
            <td>{{ product.name }}</td>
            <td>{% if product.brand %}{{ product.brand.name }}{% else %}N/A{% endif %}</td>
            <td>{{ product.processor|default:"N/A" }}</td>
            <td>{{ product.ram_capacity|default:"N/A" }}</td>
            <td>{{ product.ram_type|default:"N/A" }}</td>
            <td>{{ product.screen_size|default:"N/A" }}</td>
            <td>{{ product.processor_generation|default:"N/A" }}</td>
            <td>{{ product.ssd_capacity|default:"N/A" }}</td>
            <td>{{ product.operating_system|default:"N/A" }}</td>
            <td>{{ product.weight|default:"N/A" }}</td>
            <td>{{ product.touch_screen|default:"N/A" }}</td>
            <td>
                {% if product.image %}
                    <img src="{{ product.image.url }}" width="50" height="50" alt="{{ product.name }}">
                {% else %}
                    No Image
                {% endif %}
            </td>
            <td>{{ product.price }}</td>
            <td>{{ product.discount|default:"0" }}</td>
            <td>{% if product.category %}{{ product.category.name }}{% else %}N/A{% endif %}</td>

            <!-- Color Display -->
            <td>
                {% if product.colors.all %}
                    {% for color in product.colors.all %}
                        {{ color.name }}{% if not forloop.last %}, {% endif %}
                    {% endfor %}
                {% else %}
                    -
                {% endif %}
            </td>

              <!-- ✅ Quantity Display -->
            <td>{{ product.quantity|default:"0" }}</td>

            <td>{{ product.created_at|date:"d-m-Y H:i" }}</td>
            <td>
                <a href="{% url 'edit_laptop_product' product.id %}" class="btn btn-sm btn-primary">Edit</a>
                <a href="{% url 'delete_laptop_product' product.id %}" 
                   class="btn btn-sm btn-danger"
                   onclick="return confirm('Are you sure you want to delete this product?');">
                   Delete
                </a>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="19">No laptop products found.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
</div>
{% endblock %}
