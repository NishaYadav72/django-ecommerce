{% extends 'backend/admin_base.html' %}
{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="container mx-auto my-6 px-4">

    <h1 class="text-3xl font-bold mb-6 text-gray-800">Welcome, {{ request.user.username }}</h1>
    <p class="text-gray-600 mb-8">This is the admin dashboard. You can manage all products, banners, and notices from here.</p>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6">

        <!-- üß© Total Products -->
        <div class="dashboard-card style-blue">
            <div class="icon">üì¶</div>
            <h3 class="card-title">Total Products</h3>
            <p class="card-value">{{ total_products }}</p>
        </div>

        <!-- üõç Total Orders -->
        <div class="dashboard-card style-green">
            <div class="icon">üõçÔ∏è</div>
            <h3 class="card-title">Total Orders</h3>
            <p class="card-value">{{ total_orders }}</p>
        </div>

        <!-- ‚ù§Ô∏è Total Wishlist -->
        <div class="dashboard-card style-purple">
            <div class="icon">üíñ</div>
            <h3 class="card-title">Total Wishlist</h3>
            <p class="card-value">{{ total_wishlist }}</p>
        </div>

        <!-- üõí Total Cart -->
        <div class="dashboard-card style-orange">
            <div class="icon">üõí</div>
            <h3 class="card-title">Total Cart</h3>
            <p class="card-value">{{ total_cart }}</p>
        </div>

        <!-- ‚ö†Ô∏è Out of Stock -->
        <div class="dashboard-card out-of-stock-card">
            <h3 class="card-title">‚ö† Out of Stock</h3>
            <p class="card-value">{{ out_of_stock }}</p>
            <span class="warning-text">Check inventory now!</span>
        </div>

    </div>

    <!-- üìä Chart Section -->
    <div class="chart-section mt-10 bg-white p-6 rounded-lg shadow-lg">
        <h2 class="text-2xl font-semibold mb-4 text-gray-800">Product Analytics</h2>
        <canvas id="productChart" height="100"></canvas>
    </div>
</div>

<!-- Chart.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const ctx = document.getElementById('productChart').getContext('2d');
const productChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ['Products', 'Orders', 'Wishlist', 'Cart', 'Out of Stock'],
        datasets: [{
            label: 'Count',
            data: [
                {{ total_products|default:0 }},
                {{ total_orders|default:0 }},
                {{ total_wishlist|default:0 }},
                {{ total_cart|default:0 }},
                {{ out_of_stock|default:0 }}
            ],
            backgroundColor: [
                '#56ccf2',
                '#00b09b',
                '#8e2de2',
                '#ff9966',
                '#ff4d4d'
            ],
            borderColor: [
                '#2f80ed',
                '#00997d',
                '#4a00e0',
                '#ff5e62',
                '#b30000'
            ],
            borderWidth: 2,
            borderRadius: 6,
        }]
    },
    options: {
        responsive: true,
        plugins: {
            legend: { display: false },
            tooltip: { enabled: true },
        },
        scales: {
            y: { beginAtZero: true, grid: { color: '#f3f4f6' } },
            x: { grid: { display: false } }
        },
        animation: {
            duration: 1500,
            easing: 'easeOutBounce'
        }
    }
});
</script>

<style>
.dashboard-card {
    padding: 25px 20px;
    border-radius: 15px;
    box-shadow: 0 6px 15px rgba(0,0,0,0.08);
    text-align: center;
    color: #fff;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}
.dashboard-card:hover {
    transform: translateY(-8px) rotate(-1deg);
}
.icon {
    font-size: 2.5rem;
    margin-bottom: 8px;
}
.style-blue {
    background: linear-gradient(135deg, #56ccf2, #2f80ed);
    box-shadow: 0 4px 15px rgba(47,128,237,0.4);
}
.style-green {
    background: linear-gradient(135deg, #00b09b, #96c93d);
    box-shadow: 0 4px 15px rgba(0,176,155,0.4);
}
.style-purple {
    background: linear-gradient(135deg, #8e2de2, #4a00e0);
    box-shadow: 0 4px 15px rgba(142,45,226,0.4);
}
.style-orange {
    background: linear-gradient(135deg, #ff9966, #ff5e62);
    box-shadow: 0 4px 15px rgba(255,94,98,0.4);
}
.out-of-stock-card {
    background: linear-gradient(135deg, #ffafbd, #ffc3a0);
    border: 2px solid #ff4d4d;
    animation: blink 2s infinite;
}
.out-of-stock-card .card-title { color: #7a0000; }
.out-of-stock-card .card-value {
    color: #b30000;
    font-size: 3rem;
}
.warning-text {
    display: block;
    font-size: 0.9rem;
    font-weight: 600;
    color: #8b0000;
    margin-top: 8px;
    text-transform: uppercase;
}
@keyframes blink {
    0%, 100% { box-shadow: 0 0 10px rgba(255, 77, 77, 0.6); }
    50% { box-shadow: 0 0 25px rgba(255, 0, 0, 0.8); }
}
.chart-section {
    border-top: 5px solid #2f80ed;
}
</style>
{% endblock %}
